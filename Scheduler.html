
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--
         The FAKE - F# Make - A DSL for build tasks
    parameters will be replaced with the
         document title extracted from the <h1> element or
         file name, if there is no <h1> heading
       -->
    <title>
        Akka.NET
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Akka.NET">
    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <div class="container">
        
      <h1>
<a name="user-content-scheduler" class="anchor" href="#scheduler" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scheduler</h1>

<p>Sometimes the need for making things happen in the future arises, and where do
you go look then?  Look no further than <code>ActorSystem</code>! There you find the
<code>Scheduler</code> property that returns an instance of
<code>Akka.Actor.Scheduler</code>, this instance is unique per ActorSystem and is
used internally for scheduling things to happen at specific points in time.</p>

<p>You can schedule sending of messages to actors and execution of tasks
(Action delegate).  You will get a <code>Task</code> back.
By providing a <code>CancellationTokenSource</code> you can cancel the scheduled task.</p>

<blockquote>
<p><strong>warning</strong><br>
Scheduling timing is inexact.</p>
</blockquote>

<h2>
<a name="user-content-some-examples" class="anchor" href="#some-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Some examples</h2>

<div class="highlight highlight-csharp"><pre><span class="kt">var</span> <span class="n">system</span> <span class="p">=</span> <span class="n">ActorSystem</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="s">"MySystem"</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">someActor</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">ActorOf</span><span class="p">&lt;</span><span class="n">SomeActor</span><span class="p">&gt;(</span><span class="s">"someActor"</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">someMessage</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SomeMessage</span><span class="p">()</span> <span class="p">{...};</span>
<span class="n">system</span>
   <span class="p">.</span><span class="n">Scheduler</span>
   <span class="p">.</span><span class="n">Schedule</span><span class="p">(</span><span class="n">TimeSpan</span><span class="p">.</span><span class="n">FromSeconds</span><span class="p">(</span><span class="m">0</span><span class="p">),</span>
             <span class="n">TimeSpan</span><span class="p">.</span><span class="n">FromSeconds</span><span class="p">(</span><span class="m">5</span><span class="p">),</span>
             <span class="n">someActor</span><span class="p">,</span> <span class="n">someMessage</span><span class="p">);</span>
</pre></div>

<p>The above example will schedule "someMessage" to be sent to "someActor" every 5 seconds.</p>

<blockquote>
<p><strong>warning</strong><br>
If you schedule a closure you should be extra careful
to not pass or close over unstable references. In practice this means that you should
not call methods on the enclosing Actor from within the closure.
If you need to schedule an invocation it is better to use the <code>Schedule()</code>
variant accepting a message and an <code>ActorRef</code> to schedule a message to self
(containing the necessary parameters) and then call the method when the message is received.</p>
</blockquote>
    
    </div>
    <a href="https://github.com/akkadotnet/Akka.NET"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
</body>
</html>